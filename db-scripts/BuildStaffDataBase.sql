-- Author: WebSphere Education 

-- CREATE SCHEMA AUTHDB;

-- Create and populate the tables used in the AUTHDB database
drop database AUTHDB;
create database AUTHDB;
CREATE TABLE AUTHDB.DEPARTMENT (
	DEPTCODE char(4) not null,
	DEPTNAME varchar(60) not null,
	MANAGER char(6)
);

INSERT INTO AUTHDB.DEPARTMENT ( DEPTCODE, DEPTNAME) 
	VALUES ('D000','Unassigned');
INSERT INTO AUTHDB.DEPARTMENT ( DEPTCODE, DEPTNAME, MANAGER) 
	VALUES ('D501','Marketing', 'E10002');
INSERT INTO AUTHDB.DEPARTMENT ( DEPTCODE, DEPTNAME) 
	VALUES ('D601','Operations');
INSERT INTO AUTHDB.DEPARTMENT ( DEPTCODE, DEPTNAME) 
	VALUES ('D701','Finance');
INSERT INTO AUTHDB.DEPARTMENT ( DEPTCODE, DEPTNAME) 
	VALUES ('D801','Research and Development');

CREATE TABLE AUTHDB.EMPLOYEE (
	EMPID char(6) not null,
	DEPTCODE char(4) not null,
	JOBTITLE varchar (30),
	GIVENNAME varchar(30) not null,
	FAMILYNAME varchar(30) not null,
	COMMONNAME varchar (60),
	NAMETITLE varchar(6)
);

INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10001', 'D501','Salesperson', 'Edward James', 'Thompson', 'Ed Thompson', 'Mr');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10002', 'D501','Marketing Manager', 'Grace', 'Serraro', 'Grace Serrero', 'Miss');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10003', 'D601','Procurements', 'Marie Therese', 'Sauve', 'Marie Sauve', 'Ms');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10004', 'D701','Receivables clerk', 'Alison H. J.', 'Hiivala', 'Ali Hiivala', 'Miss');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10005', 'D701','Accountant', 'Lars K.', 'Instrom', 'Lars Instrom', 'Mr');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10006', 'D701','Cashier', 'Sally Louisa', 'Bavarra', 'Louise Bavarra ', 'Ms');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10007', 'D501','Web Master', 'Tung Dae', 'Twan', 'T.D. Twan', 'Mr');
	INSERT INTO AUTHDB.EMPLOYEE ( EMPID, DEPTCODE, JOBTITLE, GIVENNAME, FAMILYNAME, COMMONNAME, NAMETITLE) 
	VALUES ('E10008', 'D501','Salesperson', 'Katherine', 'Chomsky', 'Kathy Chomsky', 'Mrs');

-- AUTHDB.CONTRACT replaced by BILLING.CONTRACT in a separate table	
-- CREATE TABLE AUTHDB.CONTRACT (
--	EMPID char(6) not null,
--	STATUS char(12),
--	RANK integer not null,
--	BASEWAGE numeric(2),
--	STARTDATE date,
--	HOURLYRATE numeric(2),
--	HOURSWEEKLY integer,
--	CONTRACTNO char(10),
--	COMPANY varchar(80)
-- );

CREATE TABLE AUTHDB.ADDRESS (
	ADDRESSID integer not null,	
	EMPID char(6) not null,
	ADDLINE1 varchar (50),
	ADDLINE2 varchar (50),
	CITY varchar (20),
	REGION varchar (20),
	COUNTRY varchar (20),
	POSTCODE varchar (10)
);

INSERT INTO AUTHDB.ADDRESS ( ADDRESSID, EMPID, ADDLINE1, CITY, REGION, COUNTRY, POSTCODE) 
	VALUES (1, 'E10001','107 Main Street, Apt 912', 'Toronto', 'ON', 'Canada', 'M4R2G5');

CREATE TABLE AUTHDB.PHONENUMBER (
	PHONEID integer not null,	
	EMPID char(6) not null,
	LOCALNUM varchar (15) not null,
	INTLPREFIX varchar (5),
	PHONETYPE varchar (11) not null
);

INSERT INTO AUTHDB.PHONENUMBER ( PHONEID, EMPID, LOCALNUM, PHONETYPE) 
	VALUES (1, 'E10001', '4165429764','HOME');

CREATE TABLE AUTHDB.EMAIL (
	EMAILID integer not null,	
	EMPID char(6) not null,	
	EMAILADDRESS char(40) not null,
	EMAILTYPE varchar (5) not null
);

INSERT INTO AUTHDB.EMAIL ( EMAILID, EMPID, EMAILADDRESS, EMAILTYPE) 
	VALUES (1, 'E10001','ejthompson@apex.com', 'WORK'); 
INSERT INTO AUTHDB.EMAIL ( EMAILID, EMPID, EMAILADDRESS, EMAILTYPE) 
	VALUES (2, 'E10001','edjt101@mymail.com', 'HOME');
INSERT INTO AUTHDB.EMAIL ( EMAILID, EMPID, EMAILADDRESS, EMAILTYPE) 
	VALUES (3, 'E10002','grace@algernon.com', 'WORK'); 
INSERT INTO AUTHDB.EMAIL ( EMAILID, EMPID, EMAILADDRESS, EMAILTYPE) 
	VALUES (4, 'E10003','mtsauve@supermail.com', 'HOME'); 

CREATE TABLE AUTHDB.PHOTO (
	PHOTOID integer not null,	
	EMPID char(6) not null,	
	IMAGENAME varchar(40),
	PHOTOIMAGE varchar (10000)
);

INSERT INTO AUTHDB.PHOTO ( PHOTOID, EMPID, IMAGENAME) 
	VALUES (1, 'E10002','db200130.gif'); 
INSERT INTO AUTHDB.PHOTO ( PHOTOID, EMPID, IMAGENAME) 
	VALUES (2, 'E10004','db200140.gif');
INSERT INTO AUTHDB.PHOTO ( PHOTOID, EMPID, IMAGENAME) 
	VALUES (3, 'E10005','db200150.gif'); 
INSERT INTO AUTHDB.PHOTO ( PHOTOID, EMPID, IMAGENAME) 
	VALUES (4, 'E10007','db200190.gif'); 

CREATE TABLE AUTHDB.PROJECT (
	PROJID char(6) not null,
	PROJNAME varchar(80) not null,
	STARTDATE date,
	TARGETDATE date,
	STATUS char (7),
	DESCRIPTION varchar (1000)
);

INSERT INTO AUTHDB.PROJECT ( PROJID, PROJNAME, STARTDATE, STATUS)
	VALUES ('PK5555','MPD Research', '2009/01/01','ACTIVE');
INSERT INTO AUTHDB.PROJECT ( PROJID, PROJNAME, STARTDATE, TARGETDATE, STATUS)
	VALUES ('PK5666','Web Site Update', '2009/06/01', '2009/12/31', 'PENDING');
INSERT INTO AUTHDB.PROJECT ( PROJID, PROJNAME, STARTDATE, TARGETDATE, STATUS)
	VALUES ('PK5444','LMX Reduction', '2008/01/09', '2009/12/31', 'CLOSED');


create table AUTHDB.PROJECTMEMBER (
	PROJID char(6) not null,
	EMPID char(6) not null 
);

INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5555','E10001');
INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5555','E10002');
INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5555','E10008'); 
INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5666','E10007');
INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5444','E10002');
INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5444','E10005');
INSERT INTO AUTHDB.PROJECTMEMBER (PROJID, EMPID)
   VALUES ('PK5444','E10007');
	
ALTER TABLE AUTHDB.EMPLOYEE 
	ADD CONSTRAINT EMP_PK PRIMARY KEY (EMPID);

ALTER TABLE AUTHDB.DEPARTMENT 
	ADD CONSTRAINT DEPT_PK PRIMARY KEY (DEPTCODE);
ALTER TABLE AUTHDB.DEPARTMENT
	ADD CONSTRAINT DEPT_MGR_FK FOREIGN KEY (MANAGER) REFERENCES AUTHDB.EMPLOYEE (EMPID);

ALTER TABLE AUTHDB.EMPLOYEE
	ADD CONSTRAINT EMP_DEPT_FK FOREIGN KEY (DEPTCODE) REFERENCES AUTHDB.DEPARTMENT (DEPTCODE);	

ALTER TABLE AUTHDB.ADDRESS 
	ADD CONSTRAINT ADD_PK PRIMARY KEY (ADDRESSID);
ALTER TABLE AUTHDB.ADDRESS 
	ADD CONSTRAINT ADD_EMP_FK FOREIGN KEY (EMPID) REFERENCES AUTHDB.EMPLOYEE (EMPID);	

-- ALTER TABLE AUTHDB.CONTRACT
--	ADD CONSTRAINT CONT_PK PRIMARY KEY (EMPID);
-- ALTER TABLE AUTHDB.CONTRACT
--	ADD CONSTRAINT CONT_EMP_FK FOREIGN KEY (EMPID) REFERENCES AUTHDB.EMPLOYEE (EMPID);
	
ALTER TABLE AUTHDB.PHONENUMBER 
	ADD CONSTRAINT PHONE_PK PRIMARY KEY (PHONEID);
ALTER TABLE AUTHDB.PHONENUMBER 
	ADD CONSTRAINT PHONE_EMP_FK FOREIGN KEY (EMPID) REFERENCES AUTHDB.EMPLOYEE (EMPID);

ALTER TABLE AUTHDB.EMAIL 
	ADD CONSTRAINT EMAIL_PK PRIMARY KEY (EMAILID);
ALTER TABLE AUTHDB.EMAIL 
	ADD CONSTRAINT EMAIL_EMP_FK FOREIGN KEY (EMPID) REFERENCES AUTHDB.EMPLOYEE (EMPID);

ALTER TABLE AUTHDB.PHOTO 
	ADD CONSTRAINT PHOTO_PK PRIMARY KEY (PHOTOID);
ALTER TABLE AUTHDB.PHOTO 
	ADD CONSTRAINT PHOTO_EMP_FK FOREIGN KEY (EMPID) REFERENCES AUTHDB.EMPLOYEE (EMPID);

ALTER TABLE AUTHDB.PROJECT 
	ADD CONSTRAINT PROJ_PK PRIMARY KEY (PROJID);	

ALTER TABLE AUTHDB.PROJECTMEMBER 
	ADD CONSTRAINT PROJMEM_PK PRIMARY KEY (PROJID, EMPID);
ALTER TABLE AUTHDB.PROJECTMEMBER 
	ADD CONSTRAINT MEM_PROJ_FK FOREIGN KEY (PROJID) REFERENCES AUTHDB.PROJECT (PROJID);
ALTER TABLE AUTHDB.PROJECTMEMBER
	ADD CONSTRAINT PROJ_MEM_FK FOREIGN KEY (EMPID) REFERENCES AUTHDB.EMPLOYEE (EMPID);

